import matplotlib.pyplot as plt
import numpy as np


titles = ['Expert labeling cost on AlexNet ($s_n=5$)',
          'Expert labeling cost on AlexNet ($s_n=7$)',
          'Expert labeling cost on ResNet50 ($s_n=5$)',
          'Expert labeling cost on ResNet50 ($s_n=7$)',
]

names = ['D-W','D-A','A-W','A-D','W-A','W-D']
querys = [
[
{11: 11, 15: 5, 16: 5, 12: 5, 14: 5, 13: 4, 17: 4, 10: 3, 18: 3, 6: 3, 19: 2, 5: 1},
{14: 10, 15: 8, 10: 6, 16: 6, 7: 5, 11: 5, 17: 4, 12: 4, 18: 4, 19: 3, 13: 3, 8: 3, 4: 2, 0: 1, 3: 1, 2: 1, 1: 1},
{15: 9, 16: 7, 11: 6, 13: 6, 18: 4, 14: 3, 17: 3, 19: 3, 12: 2, 9: 2, 6: 2, 8: 2, 10: 1, 7: 1, 1: 1},
{17: 7, 15: 6, 16: 6, 12: 5, 11: 4, 13: 4, 18: 4, 4: 3, 10: 2, 14: 2, 7: 2, 8: 1, 3: 1, 6: 1, 2: 1, 19: 1},
{10: 8, 12: 7, 7: 5, 11: 5, 14: 5, 15: 4, 18: 4, 8: 4, 16: 4, 13: 3, 4: 3, 9: 3, 3: 3, 17: 2, 0: 1, 19: 1, 5: 1},
{15: 10, 16: 9, 12: 7, 13: 5, 18: 5, 11: 5, 17: 4, 14: 3, 19: 3, 10: 3, 9: 1}
],
[
{13: 9, 18: 9, 12: 8, 16: 8, 17: 8, 11: 7, 15: 7, 14: 5, 6: 4, 19: 2, 7: 1, 10: 1, 9: 1, 5: 1},
{14: 13, 12: 10, 17: 8, 15: 7, 7: 6, 10: 6, 18: 6, 11: 5, 13: 5, 16: 5, 19: 4, 9: 4, 8: 4, 2: 3, 0: 3, 3: 1, 6: 1},
{16: 11, 13: 9, 17: 8, 12: 8, 15: 7, 11: 7, 18: 7, 14: 6, 19: 5, 10: 4, 6: 4, 9: 3, 8: 2, 3: 2, 7: 2, 4: 2, 5: 1, 0: 1},
{18: 12, 15: 10, 12: 9, 11: 8, 16: 8, 17: 7, 13: 6, 14: 4, 10: 4, 8: 4, 19: 4, 9: 3, 4: 2, 7: 1, 2: 1},
{7: 8, 15: 7, 17: 6, 16: 5, 8: 5, 14: 5, 18: 5, 11: 4, 12: 4, 10: 3, 3: 3, 13: 2, 9: 2, 19: 1, 4: 1, 2: 1, 0: 1, 6: 1}, 
{11: 12, 15: 9, 18: 9, 12: 7, 16: 7, 17: 7, 19: 7, 13: 7, 10: 6, 14: 3, 7: 3, 9: 1}
],
[
{13: 8, 15: 7, 19: 7, 16: 6, 11: 5, 18: 5, 12: 5, 17: 4, 10: 4, 14: 4, 8: 4, 5: 2, 0: 1, 4: 1, 7: 1, 3: 1},
{15: 12, 13: 8, 8: 7, 14: 6, 12: 6, 11: 5, 17: 5, 10: 5, 9: 5, 16: 5, 19: 5, 18: 4, 7: 3, 6: 2, 3: 1, 2: 1, 4: 1},
{12: 8, 13: 8, 11: 7, 17: 7, 15: 6, 14: 5, 19: 5, 18: 5, 8: 4, 16: 3, 10: 3, 0: 3, 6: 1, 2: 1, 1: 1, 9: 1, 5: 1},
{18: 8, 13: 6, 16: 6, 15: 5, 17: 5, 10: 5, 14: 4, 11: 2, 12: 2, 3: 2, 2: 1, 8: 1, 7: 1, 19: 1, 4: 1, 0: 1},
{15: 10, 10: 6, 12: 6, 11: 5, 16: 5, 13: 4, 17: 4, 18: 4, 19: 4, 8: 4, 9: 4, 7: 3, 0: 3, 14: 2, 6: 2, 3: 2},
{17: 9, 11: 8, 13: 7, 10: 7, 15: 6, 19: 6, 14: 5, 16: 5, 18: 5, 12: 4, 4: 2, 8: 2}
],
[
{13: 10, 14: 8, 15: 8, 12: 8, 11: 7, 18: 7, 17: 7, 16: 6, 19: 4, 8: 3, 10: 2, 0: 2, 3: 1, 4: 1, 6: 1},
{15: 10, 17: 8, 8: 8, 10: 7, 14: 7, 9: 6, 13: 6, 18: 6, 16: 5, 19: 5, 12: 4, 11: 3, 3: 3, 6: 2, 7: 2, 2: 1, 4: 1},
{13: 12, 18: 9, 11: 8, 12: 8, 14: 7, 15: 7, 19: 7, 16: 4, 17: 4, 6: 3, 8: 2, 7: 1, 10: 1, 0: 1, 9: 1, 2: 1},
{15: 11, 16: 10, 18: 6, 17: 5, 11: 4, 13: 4, 14: 3, 3: 3, 7: 3, 19: 2, 10: 2, 12: 1, 9: 1, 8: 1},
{15: 12, 13: 10, 17: 8, 10: 8, 16: 8, 8: 7, 12: 7, 14: 6, 11: 4, 18: 4, 19: 3, 7: 3, 0: 2, 3: 2, 9: 2, 6: 2, 4: 1},
{11: 10, 16: 10, 15: 9, 12: 9, 18: 8, 14: 7, 10: 7, 17: 6, 13: 6, 19: 3, 4: 2, 9: 2, 3: 1}
]
]


    




pdfs = ['AlexNet_s_n=5',
          'AlexNet_s_n=7',
          'ResNet50_s_n=5',
          'ResNet50_s_n=7',
]

for index, (ts,qs) in enumerate(zip(titles,querys)):
    fig, ax = plt.subplots()
    total = 0 
    for name, query in zip(names, qs):
        x = np.arange(20)
        y = [0] * 20
        for k,v in zip(query.keys(),query.values()):
            y[k] = v
        total+=sum(y)
        ax.bar(x, y, alpha=0.4, width=1, label=name)

    ax.axhline(y=total/len(names)/20)
    print(total/len(names)/20)
    ax.set_ylabel('Number of queries')
    ax.set_title(ts)
    ax.legend(loc=2)

    plt.savefig(f"results/MarkCost_{pdfs[index]}.pdf", dpi=150)
    plt.show()